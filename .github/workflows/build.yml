name: build
on: 
Â  push: 
Â  Â  branches: 
Â  Â  Â  - main # è¿™é‡Œè¡¨ç¤ºpushåˆ°mainåˆ†æ”¯å°±ä¼šè§¦å‘æµç¨‹
jobs:
Â  build-and-deploy:
Â  Â  runs-on: ubuntu-18.04
Â  Â  steps:
Â  Â  Â  # è¿™æ˜¯githubå®˜æ–¹çš„ä¸€ä¸ªactionï¼Œç”¨äºcloneè¯¥ä»“åº“çš„æºç åˆ°å·¥ä½œæµä¸­ï¼Œ
Â  Â  Â  - name: Checkout ğŸ›
Â  Â  Â  Â  uses: actions/checkout@v2
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  persist-credentials: false
Â  Â  Â  - name: Build
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  yarn Â # å®‰è£…ä¾èµ–
Â  Â  Â  Â  Â  npm run build Â # æ‰§è¡Œæ‰“åŒ…
Â  Â  Â  # è¿æ¥åˆ°sshï¼Œå¹¶ä¸”åšä¸€ä¸ªæ‹·è´æ“ä½œçš„action
Â  Â  Â  - name: Deploy 
Â  Â  Â  Â  uses: cross-the-world/ssh-scp-ssh-pipelines@latest

Â  Â  Â  Â  env:
Â  Â  Â  Â  Â  WELCOME: "ssh scp ssh pipelines"
Â  Â  Â  Â  Â  LASTSSH: "Doing something after copying"
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â host: "${{ secrets.DR_HOST }}"
Â  Â  Â  Â  Â user: ${{ secrets.DR_USER }}
Â  Â  Â  Â  Â pass: ${{ secrets.DR_PASS }}
Â  Â  Â  Â  Â #host: "name: build
on: 
Â  push: 
Â  Â  branches: 
Â  Â  Â  - main # è¿™é‡Œè¡¨ç¤ºpushåˆ°mainåˆ†æ”¯å°±ä¼šè§¦å‘æµç¨‹
jobs:
Â  build-and-deploy:
Â  Â  runs-on: ubuntu-18.04
Â  Â  steps:
Â  Â  Â  # è¿™æ˜¯githubå®˜æ–¹çš„ä¸€ä¸ªactionï¼Œç”¨äºcloneè¯¥ä»“åº“çš„æºç åˆ°å·¥ä½œæµä¸­ï¼Œ
Â  Â  Â  - name: Checkout ğŸ›
Â  Â  Â  Â  uses: actions/checkout@v2
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  persist-credentials: false
Â  Â  Â  - name: Build
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  yarn Â # å®‰è£…ä¾èµ–
Â  Â  Â  Â  Â  npm run build Â # æ‰§è¡Œæ‰“åŒ…
Â  Â  Â  # è¿æ¥åˆ°sshï¼Œå¹¶ä¸”åšä¸€ä¸ªæ‹·è´æ“ä½œçš„action
Â  Â  Â  - name: Deploy 
Â  Â  Â  Â  uses: cross-the-world/ssh-scp-ssh-pipelines@latest

Â  Â  Â  Â  env:
Â  Â  Â  Â  Â  WELCOME: "ssh scp ssh pipelines"
Â  Â  Â  Â  Â  LASTSSH: "Doing something after copying"
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â host: "${{ secrets.DR_HOST }}"
Â  Â  Â  Â  Â user: ${{ secrets.DR_USER }}
Â  Â  Â  Â  Â pass: ${{ secrets.DR_PASS }}
Â  Â  Â  Â  Â #host: "106.52.195.58"
Â  Â  Â  Â  Â #user: "root"
Â  Â  Â  Â  Â #pass: "lnyy1122."
Â  Â  Â  Â  Â connect_timeout: 10s
Â  Â  Â  Â  Â first_ssh: |
Â  Â  Â  Â  Â  Â  rm -rf /home/dist
Â  Â  Â  Â  Â  Â  mkdir -p /home/dist
Â  Â  Â  Â  Â scp: |
Â  Â  Â  Â  Â  Â './dist/*' => /home/dist
Â  Â  Â  Â  Â #last_ssh: |
Â  Â  Â  Â  Â  Â  #cd /home/dist # åˆ‡æ¢åˆ°éƒ¨ç½²ç›®å½•
Â  Â  Â  Â  Â  Â  #tar -xzvf dist.tar Â # å°† tar æ‰“åŒ…æ–‡ä»¶è¿›è¡Œè§£å‹åˆ°å½“å‰éƒ¨ç½²ç›®å½•"
Â  Â  Â  Â  Â #user: "root"
Â  Â  Â  Â  Â #pass: "wang5224@"
Â  Â  Â  Â  Â connect_timeout: 10s
Â  Â  Â  Â  Â first_ssh: |
Â  Â  Â  Â  Â  Â  rm -rf /home/dist
Â  Â  Â  Â  Â  Â  mkdir -p /home/dist
Â  Â  Â  Â  Â scp: |
Â  Â  Â  Â  Â  Â './dist/*' => /home/dist
Â  Â  Â  Â  Â #last_ssh: |
Â  Â  Â  Â  Â  Â  #cd /home/dist # åˆ‡æ¢åˆ°éƒ¨ç½²ç›®å½•
Â  Â  Â  Â  Â  Â  #tar -xzvf dist.tar Â # å°† tar æ‰“åŒ…æ–‡ä»¶è¿›è¡Œè§£å‹åˆ°å½“å‰éƒ¨ç½²ç›®å½•
